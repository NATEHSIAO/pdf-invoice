#基本描述：
我想要一個電腦 web應用可以登入email 之後，搜尋標題包含「發票」的所有信件，並且批量下載中間的PDF 檔案，最後解析所有pdf的發票欄位，彙整為csv檔案

＃技術棧選擇
##前端
- Next.js 15.1.6（搭配 TypeScript）
- UI 套件：
  - Tailwind CSS 3.4.1
  - shadcn/ui
- 相關依賴：
  - React 19.0.0
  - TypeScript 5.x
  - @radix-ui 組件
  - lucide-react 圖標

##後端
- Python FastAPI 0.115.8
- 電子郵件存取： 
  - 認證：OAuth2.0 (Google + Microsoft)
  - python-jose[cryptography] 3.3.0
  - httpx 0.28.1
- 部署：Vercel

##PDF 下載與解析
- PDF 下載：httpx
- PDF 解析：pdfplumber 0.11.5

##CSV 產生
Python 標準 csv 模組

##部署與其他
- Docker 多容器架構
  - 前端容器：基於 Node.js
  - 後端容器：基於 Python 3.12
- 開發工具：
  - uvicorn 0.34.0 (ASGI 伺服器)
  - python-dotenv 1.0.1 (環境變數管理)

---

# 頁面流程與功能盤點

## 1. 登入頁面
提供用戶第三方登入功能
**功能：**
- 提供 及 OAuth 認證功能
- 使用者輸入：
  - 授權登入（Google、microsoft 第三方登入）
- 登入成功後，跳轉到搜尋設定頁面
---


## 2. 搜尋設定頁面（主頁面）
**功能：**
- 設定搜尋條件：
  - 搜尋關鍵字（預設：「發票」）：可以輸入多個關鍵字，以空白鍵分隔
  - 設定日期範圍（起始 & 結束）預設：最近30天
  - 設定信件夾選擇（Inbox、Archive 等，預設：Inbox）
- 啟動搜尋
    - 啟動搜尋後，搜尋及果會顯示在下方列表
- 搜尋結果列表
  - 顯示符合搜尋結果的email列表
    - 點擊email，可以查看email內容（由右側抽屜展示）
    - 列表顯示欄位：
      - email標題
      - 發信日期
      - 發信人
    -列表有checkbox，可以勾選多個email，進行批量下載處理(預設勾選)
    -列表排序依據：發信日期(由近到遠)
  - 錯誤處理：
    - 顯示錯誤訊息
    - 提供重試選項
- 下載並開始解析PDF
    - 勾選email後，點擊[開始解析]按鈕，進入「發票解析」頁面

---



## 3. 發票解析頁面
**功能：**
- 當點擊[開始解析]按鈕後，會打開此區塊並進行以下動作：
    - 會下載所有勾選的email附件(PDF)到暫存空間
    - 下載完成後，開始解析PDF欄位
    - 解析完成後，展示解析內容列表
        - 下載解析處理中顯示進度條，直到完成下載、解析完畢展示所有內容
- 顯示解析後的發票欄位摘要：
  - 發票號碼
  - 日期
  - 金額
  - 買方 / 賣方資訊
- 匯出與下載：
  - 產生 CSV 檔案
  - 提供下載按鈕

---

## 4. 設定頁面
**功能：**
- 登出：
  - 登出後，跳轉到登入頁面
---


